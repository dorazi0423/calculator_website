<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>숫자 계산기</title>

    <!-- css설정 -->

    <link rel="stylesheet" href="unit-calculator.css" />

    <!-- 파비콘 -->
    <link rel="icon" href="img/favicon.png" type="image/png" />
  </head>
  <body>
    <!-- 컨테이너 시작 -->
    <div class="container">
      <!-- wrapper 시작 -->
      <div class="wrapper">
        <!-- 헤더 시작 -->
        <header class="header">
          <a href="index.html" class="header_name"><h1>간단한계산기</h1></a>
          <div class="header_btn">
            <a href="number-calculator.html" class="btn green1">숫자계산기</a>
            <a href="unit-calculator.html" class="btn green2">단위계산기</a>
            <a href="daily-calculator.html" class="btn green3">일상계산기</a>
            <button id="menuToggle" class="menuToggle hidden">
              <img src="img/menuToggle.png" />
            </button>
          </div>
        </header>
        <nav id="navMenu" class="nav-menu hidden">
          <a href="number-calculator.html" class="btn">숫자계산기</a>
          <a href="unit-calculator.html" class="btn">단위계산기</a>
          <a href="daily-calculator.html" class="btn">일상계산기</a>
        </nav>
        <!-- --헤더 끝-- -->
        <!-- 메인시작 -->
        <main class="main">
          <main class="main">
            <div class="unit_box">
              <form id="unit-form" class="unit-form">
                <div>
                  <label for="unit-type">변환 유형</label>
                  <select name="unit-type" id="unit-type">
                    <option value="length">길이</option>
                    <option value="area">면적</option>
                    <option value="volume">부피</option>
                    <option value="time">시간</option>
                  </select>
                </div>
                <div>
                  <!-- 첫 번째 입력 -->
                  <input
                    id="input-value"
                    type="number"
                    placeholder="값을 입력하세요"
                  />
                  <select name="from-unit" id="from-unit"></select>
                  =
                  <!-- 두 번째 입력 -->
                  <input
                    id="output-value"
                    type="number"
                    placeholder="변환된 값"
                  />
                  <select name="to-unit" id="to-unit"></select>
                </div>
              </form>
            </div>
          </main>
        </main>
        <!-- --메인 끝-- -->
      </div>
      <!-- --wrapper 끝-- -->
      <!-- 푸터 시작 -->
      <footer class="footer">푸터</footer>
      <!-- --푸터 끝-- -->
    </div>
    <!-- --컨테이너 끝-- -->
    <script>
      const menuToggle = document.getElementById("menuToggle");
      const navMenu = document.getElementById("navMenu");
      const buttons = document.querySelectorAll(".header_btn .btn");

      // 화면 크기 변경 시 메뉴 상태 갱신
      function updateMenuVisibility() {
        if (window.innerWidth <= 700) {
          menuToggle.classList.remove("hidden");

          buttons.forEach((button) => {
            button.classList.add("hidden");
          });
        } else {
          buttons.forEach((button) => {
            button.classList.remove("hidden");
          });
          menuToggle.classList.add("hidden");

          // 화면 크기가 700px 이상으로 변경되면 메뉴 숨기기
          if (!navMenu.classList.contains("hidden")) {
            navMenu.classList.remove("visible");
            navMenu.classList.add("hidden");
          }
        }
      }

      // 페이지 로드 및 크기 변경 시 상태 갱신
      updateMenuVisibility();

      menuToggle.addEventListener("click", (event) => {
        // 메뉴 토글
        if (navMenu.classList.contains("hidden")) {
          navMenu.classList.remove("hidden");
          navMenu.classList.add("visible");
        } else {
          navMenu.classList.remove("visible");
          navMenu.classList.add("hidden");
        }
        event.stopPropagation(); // 클릭 이벤트 전파 방지
      });

      // 화면의 다른 부분 클릭 시 메뉴 닫기
      document.addEventListener("click", () => {
        navMenu.classList.remove("visible");
        navMenu.classList.add("hidden");
      });

      // 화면 크기 변경 시 메뉴 상태 갱신
      window.addEventListener("resize", updateMenuVisibility);

      // 색상 목록
      const colorList = [
        "#F0F0D7",
        "#D0DDD0",
        "#EFB6C8",
        "#C6E7FF",
        "#FFF9BF",
        "#F0C1E1",
      ];

      // 목록 내 모든 버튼 요소 가져오기
      const menu_buttons = document.querySelectorAll(".nav-menu .btn");

      // 각 버튼에 hover 이벤트 리스너 추가
      menu_buttons.forEach((button) => {
        button.addEventListener("mouseover", () => {
          // 색상 목록에서 무작위 색상 선택
          const randomColor =
            colorList[Math.floor(Math.random() * colorList.length)];
          // 선택된 색상을 버튼 배경색으로 설정
          button.style.backgroundColor = randomColor;
        });

        button.addEventListener("mouseout", () => {
          // 마우스가 버튼을 벗어나면 원래 색으로 돌아가게 할 수 있습니다.
          button.style.backgroundColor = ""; // 기본 색상으로 돌아감
        });
      });

      const unitTypeSelect = document.getElementById("unit-type"); //변환유형
      const fromUnitSelect = document.getElementById("from-unit"); //변환단위
      const toUnitSelect = document.getElementById("to-unit"); //결과단위
      const inputValue = document.getElementById("input-value"); //변환값
      const outputValue = document.getElementById("output-value"); //결과값

      // 각 변환 종류에 맞는 단위 목록
      const units = {
        length: ["미터", "킬로미터", "센티미터", "밀리미터", "마일"],
        area: ["제곱미터", "제곱킬로미터", "헥타르", "에이커", "평"],
        volume: ["리터", "밀리리터", "세제곱미터", "갤런", "쿼트"],
        time: ["초", "분", "시간", "일", "주", "월", "년"],
      };

      // 선택한 변환 유형에 따라 단위 목록 업데이트
      unitTypeSelect.addEventListener("change", updateUnits);

      // 페이지가 처음 렌더링 할 때 실행
      updateUnits();

      // 변환 유형에 따라서 단위가 달라지는 함수
      function updateUnits() {
        const selectedUnitType = unitTypeSelect.value; //선택한 변환유형

        // from-unit, to-unit 콤보박스 비우기
        fromUnitSelect.innerHTML = "";
        toUnitSelect.innerHTML = "";

        // 선택된 변환 유형에 맞는 단위로 콤보박스 추가
        units[selectedUnitType].forEach((unit) => {
          const fromOption = document.createElement("option"); //변환값
          fromOption.value = unit;
          fromOption.textContent = unit; //단위
          fromUnitSelect.appendChild(fromOption);

          const toOption = document.createElement("option"); //결과값
          toOption.value = unit;
          toOption.textContent = unit; //단위
          toUnitSelect.appendChild(toOption);
        });

        // 값이 변경될 때마다 변환
        inputValue.addEventListener("input", convertUnits); //변환값
        outputValue.addEventListener("input", convertUnits); //변환값
        fromUnitSelect.addEventListener("change", convertUnits); //변환단위
        toUnitSelect.addEventListener("change", convertUnits); //결과단위
      }

      // 단위 변환해주는 함수
      function convertUnits(event) {
        const sourceElement = event.target; // 이벤트가 발생한 요소
        const fromUnit = fromUnitSelect.value; // 변환단위
        const toUnit = toUnitSelect.value; // 결과단위
        let value = parseFloat(sourceElement.value); // 입력값

        // 변환값
        let convertedValue;

        // 길이
        if (unitTypeSelect.value === "length") {
          if (fromUnit === "미터" && toUnit === "미터") {
            convertedValue = value;
          } else if (fromUnit === "미터" && toUnit === "킬로미터") {
            convertedValue = value / 1000;
          } else if (fromUnit === "킬로미터" && toUnit === "미터") {
            convertedValue = value * 1000;
          }
        }

        // 만약 inputValue가 수정되었다면 outputValue를 업데이트
        if (sourceElement === inputValue) {
          // inputValue 수정 시 outputValue 업데이트

          outputValue.value =
            convertedValue === 0 || convertedValue
              ? convertedValue
              : "변환을 지원하지 않습니다.";
        }

        // 만약 outputValue가 수정되었다면 inputValue를 업데이트
        if (sourceElement === outputValue) {
          // outputValue 수정 시 inputValue 업데이트
          inputValue.value = outputValue.value =
            convertedValue === 0 || convertedValue
              ? convertedValue
              : "변환을 지원하지 않습니다.";
        }
      }

      // inputValue에 입력될 때마다 convertUnits 함수 호출
      inputValue.addEventListener("input", convertUnits);

      // outputValue에 입력될 때마다 convertUnits 함수 호출
      outputValue.addEventListener("input", convertUnits);
    </script>
  </body>
</html>
